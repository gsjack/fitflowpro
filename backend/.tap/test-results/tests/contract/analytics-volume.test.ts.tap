TAP version 14
# Subtest: Volume Analytics Endpoints Contract Tests
{"level":30,"time":1759600070613,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-1","req":{"method":"POST","url":"/api/auth/register","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070858,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-1","res":{"statusCode":201},"responseTime":244.31411200016737,"msg":"request completed"}
    # Subtest: GET /api/analytics/volume-current-week
        # Subtest: should return current week volume tracking data (200)
            ok 1 - Returns 200 OK
            ok 2 - Has week_start field
            ok 3 - Has week_end field
            ok 4 - week_start is valid date format
            ok 5 - week_end is valid date format
            ok 6 - Has muscle_groups array
            ok 7 - Has muscle_group field
            ok 8 - muscle_group is valid enum value
            ok 9 - Has completed_sets field
            ok 10 - Has planned_sets field
            ok 11 - Has remaining_sets field
            ok 12 - Has mev field
            ok 13 - Has mav field
            ok 14 - Has mrv field
            ok 15 - Has completion_percentage field
            ok 16 - Has zone field
            ok 17 - zone is valid enum value
            ok 18 - warning is string or null
            ok 19 - completion_percentage is correctly calculated
            ok 20 - remaining_sets is correctly calculated
            1..20
        ok 1 - should return current week volume tracking data (200) # time=29.754ms
        
        # Subtest: should return 401 without authentication
            ok 1 - Returns 401 Unauthorized
            1..1
        ok 2 - should return 401 without authentication # time=3.183ms
        
        # Subtest: should validate zone logic based on completed sets
            ok 1 - Returns 200 OK
            ok 2 - Zone is below_mev when completed < MEV
            ok 3 - Zone is below_mev when completed < MEV
            ok 4 - Zone is below_mev when completed < MEV
            ok 5 - Zone is below_mev when completed < MEV
            ok 6 - Zone is below_mev when completed < MEV
            ok 7 - Zone is below_mev when completed < MEV
            ok 8 - Zone is below_mev when completed < MEV
            ok 9 - Zone is below_mev when completed < MEV
            ok 10 - Zone is below_mev when completed < MEV
            ok 11 - Zone is below_mev when completed < MEV
            ok 12 - Zone is below_mev when completed < MEV
            ok 13 - Zone is below_mev when completed < MEV
            ok 14 - Zone is below_mev when completed < MEV
            ok 15 - Zone is below_mev when completed < MEV
            1..15
        ok 3 - should validate zone logic based on completed sets # time=8.995ms
        
        1..3
    ok 1 - GET /api/analytics/volume-current-week # time=47.919ms
    
    # Subtest: GET /api/analytics/volume-trends
        # Subtest: should return volume trends with default 8 weeks (200)
            ok 1 - Returns 200 OK
            ok 2 - Has weeks array
            ok 3 - Returns at most 8 weeks by default
            1..3
        ok 1 - should return volume trends with default 8 weeks (200) # time=2.374ms
        
        # Subtest: should accept custom weeks parameter (200)
            ok 1 - Returns 200 OK
            ok 2 - Has weeks array
            ok 3 - Returns at most 12 weeks
            1..3
        ok 2 - should accept custom weeks parameter (200) # time=2.295ms
        
        # Subtest: should filter by muscle_group parameter (200)
            ok 1 - Returns 200 OK
            1..1
        ok 3 - should filter by muscle_group parameter (200) # time=1.669ms
        
        # Subtest: should accept maximum weeks parameter (52)
            ok 1 - Returns 200 OK
            ok 2 - Has weeks array
            ok 3 - Returns at most 52 weeks
            1..3
        ok 4 - should accept maximum weeks parameter (52) # time=1.739ms
        
        # Subtest: should return 400 for weeks exceeding maximum (53)
            ok 1 - Returns 400 Bad Request
            ok 2 - Returns error message
            ok 3 - Error mentions weeks parameter limit
            1..3
        ok 5 - should return 400 for weeks exceeding maximum (53) # time=1.697ms
        
        # Subtest: should return 400 for invalid muscle_group
            ok 1 - Returns 400 Bad Request
            ok 2 - Returns error message
            ok 3 - Error mentions invalid muscle_group
            1..3
        ok 6 - should return 400 for invalid muscle_group # time=1.604ms
        
        # Subtest: should return 400 for negative weeks parameter
            ok 1 - Returns 400 Bad Request
            ok 2 - Returns error message
            1..2
        ok 7 - should return 400 for negative weeks parameter # time=1.454ms
        
        # Subtest: should return 400 for non-numeric weeks parameter
            ok 1 - Returns 400 Bad Request
            ok 2 - Returns error message
            1..2
        ok 8 - should return 400 for non-numeric weeks parameter # time=1.239ms
        
        # Subtest: should return 401 without authentication
            ok 1 - Returns 401 Unauthorized
            1..1
        ok 9 - should return 401 without authentication # time=1.05ms
        
        1..9
    ok 2 - GET /api/analytics/volume-trends # time=23.158ms
    
    # Subtest: GET /api/analytics/program-volume-analysis
        # Subtest: should return program volume analysis for active program (200)
            ok 1 - Has program_id field
            ok 2 - Has mesocycle_phase field
            ok 3 - mesocycle_phase is valid enum value
            ok 4 - Has muscle_groups array
            ok 5 - Has muscle_group field
            ok 6 - Has planned_weekly_sets field
            ok 7 - Has mev field
            ok 8 - Has mav field
            ok 9 - Has mrv field
            ok 10 - Has zone field
            ok 11 - zone is valid enum value
            ok 12 - warning is string or null
            ok 13 - Zone is adequate when MEV <= planned < MAV
            ok 14 - muscle_group is valid enum value
            1..14
        ok 1 - should return program volume analysis for active program (200) # time=6.485ms
        
        # Subtest: should return 404 when no active program exists
            ok 1 - Returns 200 or 404 depending on program existence
            1..1
        ok 2 - should return 404 when no active program exists # time=3.486ms
        
        # Subtest: should return 401 without authentication
            ok 1 - Returns 401 Unauthorized
            1..1
        ok 3 - should return 401 without authentication # time=1.416ms
        
        # Subtest: should validate MEV/MAV/MRV thresholds exist
            ok 1 - MEV is less than or equal to MAV
            ok 2 - MAV is less than or equal to MRV
            ok 3 - MEV is positive
            ok 4 - Planned weekly sets is non-negative
            ok 5 - MEV is less than or equal to MAV
            ok 6 - MAV is less than or equal to MRV
            ok 7 - MEV is positive
            ok 8 - Planned weekly sets is non-negative
            ok 9 - MEV is less than or equal to MAV
            ok 10 - MAV is less than or equal to MRV
            ok 11 - MEV is positive
            ok 12 - Planned weekly sets is non-negative
            ok 13 - MEV is less than or equal to MAV
            ok 14 - MAV is less than or equal to MRV
            ok 15 - MEV is positive
            ok 16 - Planned weekly sets is non-negative
            ok 17 - MEV is less than or equal to MAV
            ok 18 - MAV is less than or equal to MRV
            ok 19 - MEV is positive
            ok 20 - Planned weekly sets is non-negative
            ok 21 - MEV is less than or equal to MAV
            ok 22 - MAV is less than or equal to MRV
            ok 23 - MEV is positive
            ok 24 - Planned weekly sets is non-negative
            ok 25 - MEV is less than or equal to MAV
            ok 26 - MAV is less than or equal to MRV
            ok 27 - MEV is positive
            ok 28 - Planned weekly sets is non-negative
            ok 29 - MEV is less than or equal to MAV
            ok 30 - MAV is less than or equal to MRV
            ok 31 - MEV is positive
            ok 32 - Planned weekly sets is non-negative
            ok 33 - MEV is less than or equal to MAV
            ok 34 - MAV is less than or equal to MRV
            ok 35 - MEV is positive
            ok 36 - Planned weekly sets is non-negative
            ok 37 - MEV is less than or equal to MAV
            ok 38 - MAV is less than or equal to MRV
            ok 39 - MEV is positive
            ok 40 - Planned weekly sets is non-negative
            ok 41 - MEV is less than or equal to MAV
            ok 42 - MAV is less than or equal to MRV
            ok 43 - MEV is positive
            ok 44 - Planned weekly sets is non-negative
            ok 45 - MEV is less than or equal to MAV
            ok 46 - MAV is less than or equal to MRV
            ok 47 - MEV is positive
            ok 48 - Planned weekly sets is non-negative
            ok 49 - MEV is less than or equal to MAV
            ok 50 - MAV is less than or equal to MRV
            ok 51 - MEV is positive
            ok 52 - Planned weekly sets is non-negative
            ok 53 - MEV is less than or equal to MAV
            ok 54 - MAV is less than or equal to MRV
            ok 55 - MEV is positive
            ok 56 - Planned weekly sets is non-negative
            1..56
        ok 4 - should validate MEV/MAV/MRV thresholds exist # time=11.605ms
        
        1..4
    ok 3 - GET /api/analytics/program-volume-analysis # time=27.425ms
    
    1..3
ok 1 - Volume Analytics Endpoints Contract Tests # time=593.346ms

{"level":30,"time":1759600070862,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-2","req":{"method":"GET","url":"/api/analytics/volume-current-week","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070879,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-2","res":{"statusCode":200},"responseTime":17.065284999087453,"msg":"request completed"}
{"level":30,"time":1759600070894,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-3","req":{"method":"GET","url":"/api/analytics/volume-current-week","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070895,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-3","res":{"statusCode":401},"responseTime":1.0808629989624023,"msg":"request completed"}
{"level":30,"time":1759600070898,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-4","req":{"method":"GET","url":"/api/analytics/volume-current-week","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070901,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-4","res":{"statusCode":200},"responseTime":2.768436999991536,"msg":"request completed"}
{"level":30,"time":1759600070910,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-5","req":{"method":"GET","url":"/api/analytics/volume-trends","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070911,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-5","res":{"statusCode":200},"responseTime":0.9728190004825592,"msg":"request completed"}
{"level":30,"time":1759600070913,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-6","req":{"method":"GET","url":"/api/analytics/volume-trends?weeks=12","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070914,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-6","res":{"statusCode":200},"responseTime":0.7510719988495111,"msg":"request completed"}
{"level":30,"time":1759600070916,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-7","req":{"method":"GET","url":"/api/analytics/volume-trends?muscle_group=chest","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070917,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-7","res":{"statusCode":200},"responseTime":0.7041389998048544,"msg":"request completed"}
{"level":30,"time":1759600070918,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-8","req":{"method":"GET","url":"/api/analytics/volume-trends?weeks=52","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070919,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-8","res":{"statusCode":200},"responseTime":0.5854089986532927,"msg":"request completed"}
{"level":30,"time":1759600070922,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-9","req":{"method":"GET","url":"/api/analytics/volume-trends?weeks=53","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070922,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-9","res":{"statusCode":400},"responseTime":0.40067899972200394,"msg":"request completed"}
{"level":30,"time":1759600070924,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-a","req":{"method":"GET","url":"/api/analytics/volume-trends?muscle_group=invalid_muscle","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070924,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-a","res":{"statusCode":400},"responseTime":0.3837780002504587,"msg":"request completed"}
{"level":30,"time":1759600070926,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-b","req":{"method":"GET","url":"/api/analytics/volume-trends?weeks=-5","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070927,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-b","res":{"statusCode":400},"responseTime":0.40081899985671043,"msg":"request completed"}
{"level":30,"time":1759600070929,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-c","req":{"method":"GET","url":"/api/analytics/volume-trends?weeks=abc","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070929,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-c","res":{"statusCode":400},"responseTime":0.33181599900126457,"msg":"request completed"}
{"level":30,"time":1759600070930,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-d","req":{"method":"GET","url":"/api/analytics/volume-trends","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070931,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-d","res":{"statusCode":401},"responseTime":0.29277400113642216,"msg":"request completed"}
{"level":30,"time":1759600070934,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-e","req":{"method":"GET","url":"/api/analytics/program-volume-analysis","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070936,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-e","res":{"statusCode":200},"responseTime":2.4011419992893934,"msg":"request completed"}
{"level":30,"time":1759600070941,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-f","req":{"method":"GET","url":"/api/analytics/program-volume-analysis","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070944,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-f","res":{"statusCode":200},"responseTime":2.2872999999672174,"msg":"request completed"}
{"level":30,"time":1759600070946,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-g","req":{"method":"GET","url":"/api/analytics/program-volume-analysis","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070946,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-g","res":{"statusCode":401},"responseTime":0.3628950007259846,"msg":"request completed"}
{"level":30,"time":1759600070948,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-h","req":{"method":"GET","url":"/api/analytics/program-volume-analysis","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
{"level":30,"time":1759600070950,"pid":215050,"hostname":"asigator-Legion-5-17ACH6H","reqId":"req-h","res":{"statusCode":200},"responseTime":2.250703999772668,"msg":"request completed"}
1..1
Database connection closed
